
# Isolation events
on_game_start_after_lobby = {
	on_actions = {
		on_game_start_remove_isolation
	}
}

on_game_start_remove_isolation = {
	effect = {
		trigger_event = {
			on_action = on_remove_isolation_uldum

			trigger_on_next_date = 610.1.1
		}
		trigger_event = {
			on_action = on_remove_isolation_pandaria
        
			trigger_on_next_date = 613.1.1
		}
		trigger_event = {
			on_action = on_remove_isolation_suramar
        
			trigger_on_next_date = 615.1.1
		}
	}
}

on_remove_isolation_uldum = {
	trigger = {
		NOT = { has_global_variable = uldum_has_opened_variable }
		current_date >= 610.1.1
	}

	effect = {
		set_global_variable = uldum_has_opened_variable
		every_ruler = { trigger_event = { id = isolation.1 } }
	}
}

on_remove_isolation_pandaria = {
	trigger = {
		NOT = { has_global_variable = mists_of_pandaria_parted_variable }
		current_date >= 613.1.1
	}

	effect = {
		set_global_variable = mists_of_pandaria_parted_variable
		every_ruler = { trigger_event = { id = isolation.2 } }
	}
}

on_remove_isolation_suramar = {
	trigger = {
		NOT = { has_global_variable = suramar_barrier_lowered_variable }
		title:k_suramar.holder ?= { is_ai = yes }
		current_date >= 615.1.1
	}

	effect = {
		reveal_suramar_unisolation_effect = yes 
	}
}