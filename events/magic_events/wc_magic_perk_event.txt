namespace = magic_perk

# Arcane Intellect by Robmart
magic_perk.0001 = {
    title = magic_perk.0001.title
    desc = magic_perk.0001.desc
    theme = order

    left_portrait = {
        character = root
        animation = happiness
    }

    option = {
        name = magic_perk.0001.a
        add_diplomacy_skill = 2
    }

    option = {
        name = magic_perk.0001.b
        add_martial_skill = 2
    }

    option = {
        name = magic_perk.0001.c
        add_stewardship_skill = 2
    }

    option = {
        name = magic_perk.0001.d
        add_intrigue_skill = 2
    }

    option = {
        name = magic_perk.0001.e
        add_learning_skill = 2
    }

    # option = {
    #     name = magic_perk.0001.f
    #     add_prowess_skill = 2
    # }
}

# Holy Aura by Dione
magic_perk.0002 = {
    title = magic_perk.0002.title
    desc = magic_perk.0002.desc
    theme = light

    left_portrait = {
        character = root
        animation = happiness
    }

    option = {
        name = magic_perk.0002.devotion
        add_character_modifier = wc_devotion_aura_modifier
    }

    option = {
        name = magic_perk.0002.retribution
        custom_tooltip = magic_perk.0002.retribution_tooltip
        add_character_flag = wc_retribution_aura_flag 
    }

    option = {
        name = magic_perk.0002.concentration
        add_character_modifier = wc_concentration_aura_modifier
    }

    option = {
        name = magic_perk.0002.vengeance
        add_character_modifier = wc_vengeance_aura_modifier
    }

}

magic_perk.0010 = {
    title = magic_perk.0010.title
    desc = magic_perk.0010.desc
    theme = elemental_water

    left_portrait = {
        character = root
        animation = thinking
    }

    option = {
        name = magic_perk.0010.coastal
        add_character_flag = aquatic_bounty_coastal
        every_sub_realm_title = {
            limit = {
                tier = tier_county
            }
            every_county_province = {
                limit = {
                    is_coastal = yes
                }
                add_to_list = targets
            }
        }

        custom_tooltip = {
            text = magic_perk.0010.coastal.effect
            save_temporary_scope_value_as = {
                name = targets_size
                value = list_size:targets
            }
            every_in_list = {
                list = targets
                add_province_modifier = {
                    modifier = wc_aquatic_bounty_coastal_modifier
                    days = 30
                }
            }
        }
    }

    option = {
        name = magic_perk.0010.riverside
        add_character_flag = aquatic_bounty_riverside
        every_sub_realm_title = {
            limit = {
                tier = tier_county
            }
            every_county_province = {
                limit = {
                    is_riverside_province = yes
                }
                add_to_list = targets
            }
        }

        custom_tooltip = {
            text = magic_perk.0010.riverside.effect
            save_temporary_scope_value_as = {
                name = targets_size
                value = list_size:targets
            }
            every_in_list = {
                list = targets
                add_province_modifier = {
                    modifier = wc_aquatic_bounty_riverside_modifier
                    days = 30
                }
            }
        }
    }

    after = {
        trigger_event = {
            on_action = on_aquatic_bounty_pulse
            days = 29
        }
    }
}

magic_perk.0020 = {
    title = magic_perk.0020.title
    desc = magic_perk.0020.desc
    theme = elemental_water

    left_portrait = {
        character = root
        animation = incapable
    }

    immediate = {
        add_trait = hibernation

        random_list = {
            50 = {
                trigger = {
                    target_has_injury_trigger = yes
                }
                remove_injury_effect = { REDUCE_SEVERITY = yes }
            }
            50 = {
                trigger = {
                    target_has_poison_trigger = yes
                }
                remove_poison_effect = yes
            }
        }

        trigger_event = {
            on_action = on_hibernation_removal
            months = 3
        }
    }

    option = {
        name = magic_perk.0020.a
    }
}

magic_perk.0021 = {
    title = magic_perk.0021.title
    desc = magic_perk.0021.desc
    theme = elemental_water

    left_portrait = {
        character = root
        animation = delirium
    }

    immediate = {
        remove_trait = hibernation
        add_character_modifier = {
            modifier = wc_lingering_hibernation_modifier
            months = 3
        }
    }

    option = {
        name = magic_perk.0021.a
    }
}