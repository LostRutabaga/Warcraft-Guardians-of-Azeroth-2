on_game_start_after_lobby = {
	# Warcraft
	on_actions = {
		on_game_start_suramar
	}
}

on_game_start_suramar = {
    effect = {
        title:k_suramar.holder ?= {
            trigger_event = { id = wc_suramar_events.0001 }
        }
    }
}

quarterly_playable_pulse = {
    on_actions = {
        suramar_events_pulse
    }
}

suramar_events_pulse = {
    trigger = {
        exists = title:k_suramar.holder
    }

    random_events = {
        chance_of_no_event = {
			value = 50
		}

        100 = wc_suramar_events.0010 
        100 = wc_suramar_events.0020 
        100 = wc_suramar_events.0030
        100 = wc_suramar_events.0040
        10 = wc_suramar_events.0050
        100 = wc_suramar_events.0060
        150 = wc_suramar_events.0070
        100 = wc_suramar_events.0080
        10 = wc_suramar_events.0100
        100 = wc_suramar_events.0110
        100 = wc_suramar_events.0120
        100 = wc_suramar_events.0130
    }
}

on_travel_plan_arrival = {
    on_actions = {
        on_travel_plan_arrival_suramar
    }
}

on_travel_plan_arrival_suramar = {
    effect = {
        if = {
            limit = {
                location.county.holder = {
                    NOR = {
                        has_title = title:k_suramar
                        liege ?= { has_title = title:k_suramar }
                        top_liege ?= { has_title = title:k_suramar }
                    }
                }
                can_become_wretched_trigger = yes
                has_trait = creature_nightborne
            }
            random_list = {
                50 = { }
                50 = {
                    trigger_event = {
                        id = wc_suramar_events.0004
                        days = { 1 3 }
                    }
                }
            }

            current_travel_plan = {
                every_entourage_character = {
                    limit = {
                        has_trait = creature_nightborne
                        can_become_wretched_trigger = yes
                    }

                    random_list = {
                        50 = { }
                        50 = {
                            trigger_event = {
                                id = wc_suramar_events.0004
                                days = { 1 3 }
                            }
                        }
                    }
                }
            }
        }
    }
}