namespace = isolation

### The cloaking device in Uldum stops working ###

#Ping event
isolation.1 = {
	type = character_event
	window = fullscreen_event
	title = EVTTITLE_isolation_1
	desc = EVTDESC_isolation_1
	theme = diplomacy
	content_source = dlc_GOA
	
	override_background = { reference = wc_uldum_fullscreen }
	
	right_portrait = { 
		character = root
		animation = idle
	}
	
	# Time to claim that superweapon I keep hearing rumors about
	option = {
		trigger = {
			is_aggressive_trigger = yes
		}
		name = ISOLATION_1_OPT_A
	}
	# Outsiders inbound
	option = {
		trigger = {
			NOT = {
				is_aggressive_trigger = yes
			}
			capital_county = { title_province = { geographical_region = world_kalimdor_south_uldum } }
		}
		name = ISOLATION_1_OPT_B
	}
	# Time to go exploring
	option = {
		trigger = {
			NOR = {
				is_aggressive_trigger = yes
				capital_county = { title_province = { geographical_region = world_kalimdor_south_uldum } }
			}
		}
		name = ISOLATION_1_OPT_C
	}
}

### MISTS OF PANDARIA ###
# Announces the parting of the Mists to the world
isolation.2 = {
	type = character_event
	window = fullscreen_event
	title = EVTTITLE_isolation_2
	content_source = dlc_GOA
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					capital_county = { title_province = { geographical_region = world_pandaria } }
				}
				desc = EVTDESC_isolation_2_pandaria
			}
			desc = EVTDESC_isolation_2_azeroth
		}
	}
	theme = diplomacy
	
	override_background = { reference = wc_jade_forest_fullscreen }
	
	right_portrait = { 
		character = root
		animation = idle
	}

	# New lands to explore and conquer!
	option = {
		trigger = {
			is_aggressive_trigger = yes
		}
		name = ISOLATION_2_OPT_A
	}
	# Welcome, wanderers!
	option = {
		trigger = {
			NOT = {
				is_aggressive_trigger = yes
			}
			capital_county = { title_province = { geographical_region = world_pandaria } }
		}
		name = ISOLATION_2_OPT_B
	}
	# Send expeditions
	option = {
		trigger = {
			NOR = {
				is_aggressive_trigger = yes
				capital_county = { title_province = { geographical_region = world_pandaria } }
			}
		}
		name = ISOLATION_2_OPT_C
	}
}

scripted_trigger can_diplomacy_suramar_trigger = {
	custom_tooltip = {
		text = ISOLATION_3_OPT_D_UNAVAILABLE
		NOT = { is_in_suramar_trigger = yes }
		
		OR = {
			capital_province = { geographical_region = world_broken_isles }
			culture = { has_elven_heritage_trigger = yes }
			has_trait = creature_nightborne
			has_trait = creature_high_elf
			has_trait = creature_night_elf
			has_trait = creature_highborne
		}
		OR = {
			is_ai = no 
			AND = {
				in_diplomatic_range = title:k_suramar.holder
				OR = {
					highest_held_title_tier >= tier_kingdom
					AND = {
						highest_held_title_tier >= tier_duchy
						is_independent_ruler = yes
						is_landless_adventurer = no
						is_mercenary_company = no
						is_holy_order = no
					}
				}
			}
		}
	}
}

### SURAMAR ###
isolation.3 = {
	type = character_event
	window = fullscreen_event
	title = EVTTITLE_isolation_3
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					is_in_suramar_trigger = yes 
				}
				desc = EVTDESC_isolation_3_suramar
			}
			desc = EVTDESC_isolation_3_azeroth
		}
	}
	theme = diplomacy
	content_source = dlc_GOA
	
	override_background = { reference = wc_suramar_fullscreen }

	# Okay
	option = {
		name = ISOLATION_3_OPT_A
		trigger = {
			NOT = { is_in_suramar_trigger = yes }
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 0.25
				can_diplomacy_suramar_trigger = yes 
			}
		}
	}
	# We chiling
	option = {
		name = ISOLATION_3_OPT_B
		trigger = {
			is_in_suramar_trigger = yes
		}

		ai_chance = {
			base = 50
		}
	}
	# Say hello to our elven brothers / new neighbors, with a letter
	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							OR = {
								culture = { has_elven_heritage_trigger = yes }
								has_trait = creature_nightborne
								has_trait = creature_high_elf
								has_trait = creature_night_elf
								has_trait = creature_highborne
							}
						}
						desc = ISOLATION_3_OPT_C_ELVEN
					}
					desc = ISOLATION_3_OPT_C_NEIGHBOR
				}
			}
		}
		trigger = {
			can_diplomacy_suramar_trigger = yes 
			is_available = yes
		}
		show_as_unavailable = {
			NOT = { is_in_suramar_trigger = yes }
		}

		first_contact_procedure_effect = {
			NATION = suramar METHOD = self STANCE = none
		}

		stress_impact = {
			paranoid = minor_stress_impact_gain
			shy = minor_stress_impact_gain
		}

		ai_chance = {
			base = 200
			wc_first_contact_travel_modifier = {
				CHARACTER = title:k_suramar.holder
			}
		}
	}

	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							OR = {
								culture = { has_elven_heritage_trigger = yes }
								has_trait = creature_nightborne
								has_trait = creature_high_elf
								has_trait = creature_night_elf
								has_trait = creature_highborne
							}
						}
						desc = ISOLATION_3_OPT_D_ELVEN
					}
					desc = ISOLATION_3_OPT_D_NEIGHBOR
				}
			}
		}
		trigger = {
			can_diplomacy_suramar_trigger = yes 
		}
		show_as_unavailable = {
			NOT = { is_in_suramar_trigger = yes }
		}

		first_contact_procedure_effect = {
			NATION = suramar METHOD = letter STANCE = friendly
		}
	
		ai_chance = {
			base = 150
			wc_friendly_first_contact_modifier = {
				CHARACTER = title:k_suramar.holder
			}
		}
	}

	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							OR = {
								culture = { has_elven_heritage_trigger = yes }
								has_trait = creature_nightborne
								has_trait = creature_high_elf
								has_trait = creature_night_elf
								has_trait = creature_highborne
							}
						}
						desc = ISOLATION_3_OPT_E_ELVEN
					}
					desc = ISOLATION_3_OPT_E_NEIGHBOR
				}
			}
		}
		trigger = {
			can_diplomacy_suramar_trigger = yes 
		}
		show_as_unavailable = {
			NOT = { is_in_suramar_trigger = yes }
		}

		first_contact_procedure_effect = {
			NATION = suramar METHOD = letter STANCE = neutral
		}
	
		ai_chance = {
			base = 150
			wc_neutral_first_contact_modifier = {
				CHARACTER = title:k_suramar.holder
			}
		}
	}

	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							OR = {
								culture = { has_elven_heritage_trigger = yes }
								has_trait = creature_nightborne
								has_trait = creature_high_elf
								has_trait = creature_night_elf
								has_trait = creature_highborne
							}
						}
						desc = ISOLATION_3_OPT_F_ELVEN
					}
					desc = ISOLATION_3_OPT_F_NEIGHBOR
				}
			}
		}
		trigger = {
			can_diplomacy_suramar_trigger = yes 
		}
		show_as_unavailable = {
			NOT = { is_in_suramar_trigger = yes }
		}

		first_contact_procedure_effect = {
			NATION = suramar METHOD = letter STANCE = hostile
		}
	
		ai_chance = {
			base = 150
			wc_hostile_first_contact_modifier = {
				CHARACTER = title:k_suramar.holder
			}
		}
	}
}